---
interact_link: content/04/2/tuning.ipynb
kernel_name: matlab
kernel_path: content/04/2
has_widgets: false
title: |-
  Manually Tuning a PID compensator
pagenum: 17
prev_page:
  url: /04/1/zeigler.html
next_page:
  url: /04/3/analpid.html
suffix: .ipynb
search: s k prop pid error tuning frac compensator system left right matlab step d textrm ti proportional add action response transfer function mathrm gain integral g steady state parameters control ki td derivative responses stage reduce overshoot example simple feedback e begin equation end often commercial eqnarray kd nonumber rm called units reset loop plant controller simulate also settling try further adjustments design file pidtuning mlx pidcl slx lecturer set section presents illustrates effects model used figure franklin powell emami naenis dynamic systems nd ed u skd kds ski rearranged into form found implementations tds where percentage equivalent known rate

comment: "***PROGRAMMATICALLY GENERATED, DO NOT EDIT. SEE ORIGINAL FILES IN /content***"
---

    <main class="jupyter-page">
    <div id="page-info"><div id="page-title">Manually Tuning a PID compensator</div>
</div>
    <div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>Lecturer</strong></p>
<p>Set up MATLAB</p>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-matlab"><pre><span></span><span class="c">%cd matlab</span>
<span class="n">pwd</span>
<span class="s">clear all</span><span class="p"></span>
<span class="n">format </span><span class="s">compact</span><span class="p"></span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="jb_output_wrapper }}">
<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>/Users/eechris/dev/eglm03-textbook/content/04/2/matlab/matlab

ans =

    &#39;/Users/eechris/dev/eglm03-textbook/content/04/2&#39;

</pre>
</div>
</div>
</div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Tuning-a-PID-Compensator">Tuning a PID Compensator<a class="anchor-link" href="#Tuning-a-PID-Compensator"> </a></h1><p>This Section presents an example that illustrates the effects of tuning the PID parameters on the step and error response of a simple system. The system model used is that of Figure 3.8 in Franklin, Powell and Emami-Naeni's 
"Feedback Control of Dynamic Systems" (2nd Ed.).</p>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="The-PID-Compensator">The PID Compensator<a class="anchor-link" href="#The-PID-Compensator"> </a></h2><p>A PID compensator has the transfer function:</p>
$$D(s)=\frac{U(s)}{E(s)}=K_\textrm{prop}+\frac{K_I}{s}+sK_D(s)$$$$\begin{equation}D(s)=\frac{K_Ds^2 + K_\textrm{prop}s+K_I}{s}\end{equation}$$
</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>This can be rearranged into a form that is often found in commercial implementations 
of the PID compensator:</p>
$$\begin{eqnarray}D(s) &amp;=&amp; \frac{K_{\mathrm{prop}}\left( \left(K_D/K_{\mathrm{prop}}s^2\right)+s+\left(K_I/K_{\mathrm{prop}}\right)\right)}{s}\nonumber\\
&amp;=&amp;\frac{K_{\rm{prop}}\left( T_D s^2 + s + 1/T_I \right)}{s}\nonumber\\
D(s) &amp;=&amp; K_{\rm{prop}}\left(1 + T_Ds + 1/\left( T_I s\right)\right)\end{eqnarray}$$
</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>where $K_\textrm{prop}$ is called the "proportional gain" (with units of 
percentage, i.e. 100% is equivalent to  $D(s)=1$), $T_D=K_D/K_\textrm{prop}$ 
is known as the "derivative time", $T_I=K_I/K_\textrm{prop}$ is the "integral 
or <em>reset time</em>" and $1/T_I$ is called the "reset rate". The tuning parameters 
provided with commercial PID compensators are often calibrated in these units.</p>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Tuning-the-PID">Tuning the PID<a class="anchor-link" href="#Tuning-the-PID"> </a></h2><p>In this example a simple type 0 control system with open loop transfer function:</p>
$$G(s) = \frac{1}{(s+1)(5s+1)}$$<p>is to be compensated with a PID compensator and the step and error responses 
are considered as each parameter is adjusted.</p>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We first define the plant:</p>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-matlab"><pre><span></span><span class="n">s</span> <span class="p">=</span> <span class="n">tf</span><span class="p">(</span><span class="s">&#39;s&#39;</span><span class="p">);</span>
<span class="n">G</span> <span class="p">=</span> <span class="mi">1</span><span class="o">/</span><span class="p">((</span><span class="n">s</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="mi">5</span><span class="o">*</span><span class="n">s</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="jb_output_wrapper }}">
<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>
G =
 
         1
  ---------------
  5 s^2 + 6 s + 1
 
Continuous-time transfer function.

</pre>
</div>
</div>
</div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We then obtain the step response and error responses of the plant with 
unity gain feedback and no controller.</p>
<p>The closed loop transfer function of the system is</p>
$$G_c(s)=\frac{G(s)}{1+G(s)}$$
</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-matlab"><pre><span></span><span class="n">Gc</span><span class="p">=</span><span class="n">feedback</span><span class="p">(</span><span class="n">G</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="jb_output_wrapper }}">
<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>
Gc =
 
         1
  ---------------
  5 s^2 + 6 s + 2
 
Continuous-time transfer function.

</pre>
</div>
</div>
</div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The error transfer function is given by</p>
$$G_e(s) = \frac{1}{1+G(s)}$$
</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-matlab"><pre><span></span><span class="n">Ge</span><span class="p">=</span><span class="mi">1</span><span class="o">/</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="n">G</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="jb_output_wrapper }}">
<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>
Ge =
 
  5 s^2 + 6 s + 1
  ---------------
  5 s^2 + 6 s + 2
 
Continuous-time transfer function.

</pre>
</div>
</div>
</div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>To simulate these responses:</p>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-matlab"><pre><span></span><span class="n">subplot</span><span class="p">(</span><span class="mi">211</span><span class="p">),</span><span class="n">step</span><span class="p">(</span><span class="n">Gc</span><span class="p">),</span><span class="n">title</span><span class="p">(</span><span class="s">&#39;Step Response&#39;</span><span class="p">),</span><span class="n">grid</span>
<span class="n">subplot</span><span class="p">(</span><span class="mi">212</span><span class="p">),</span><span class="n">step</span><span class="p">(</span><span class="n">Ge</span><span class="p">),</span><span class="n">title</span><span class="p">(</span><span class="s">&#39;Error Response&#39;</span><span class="p">),</span><span class="n">grid</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="jb_output_wrapper }}">
<div class="output_area">



<div class="output_png output_subarea ">
<img src="../../images/04/2/tuning_14_0.png"
>
</div>

</div>
</div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The incompensated system has a large steady-state step error of 0.5 (or 50%). It is also overdamped and therefore slow.</p>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="First-Tuning-Stage:-Add-Proportional-Gain">First Tuning Stage: Add Proportional Gain<a class="anchor-link" href="#First-Tuning-Stage:-Add-Proportional-Gain"> </a></h2><p>Let us add some proportional control to increase the rise time and to reduce the error to 5%. Increasing the proportional gain of the system can satisfy the error requirement</p>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-matlab"><pre><span></span><span class="n">Kprop</span> <span class="p">=</span> <span class="mi">19</span><span class="p">;</span>  
<span class="n">D</span> <span class="p">=</span> <span class="n">Kprop</span><span class="p">;</span>  
<span class="n">Go</span> <span class="p">=</span> <span class="n">D</span><span class="o">*</span><span class="n">G</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="jb_output_wrapper }}">
<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>
Go =
 
        19
  ---------------
  5 s^2 + 6 s + 1
 
Continuous-time transfer function.

</pre>
</div>
</div>
</div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-matlab"><pre><span></span><span class="n">Gc</span> <span class="p">=</span> <span class="n">feedback</span><span class="p">(</span><span class="n">Go</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span>
<span class="n">Ge</span> <span class="p">=</span> <span class="mi">1</span><span class="o">/</span><span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="n">Go</span><span class="p">);</span>  
<span class="n">subplot</span><span class="p">(</span><span class="mi">211</span><span class="p">),</span><span class="n">step</span><span class="p">(</span><span class="n">Gc</span><span class="p">),</span><span class="n">title</span><span class="p">(</span><span class="s">&#39;Step Response: Kprop = 19&#39;</span><span class="p">),</span><span class="n">grid</span>
<span class="n">subplot</span><span class="p">(</span><span class="mi">212</span><span class="p">),</span><span class="n">step</span><span class="p">(</span><span class="n">Ge</span><span class="p">),</span><span class="n">title</span><span class="p">(</span><span class="s">&#39;Error Response: Kprop = 19&#39;</span><span class="p">),</span><span class="n">grid</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="jb_output_wrapper }}">
<div class="output_area">



<div class="output_png output_subarea ">
<img src="../../images/04/2/tuning_18_0.png"
>
</div>

</div>
</div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Note that the steady-state error is now 5% as required and that the proportional controller has speeded up the response time, but at the cost of reduced damping and excessive overshoot and settling time.</p>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Second-Tuning-Stage:-Add-Derivative-Action">Second Tuning Stage: Add Derivative Action<a class="anchor-link" href="#Second-Tuning-Stage:-Add-Derivative-Action"> </a></h2><p>To reduce the overshoot and settling time we add some derivative action to 
dampen the response without affecting the steady state error.</p>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-matlab"><pre><span></span><span class="n">Td</span> <span class="p">=</span> <span class="mi">4</span><span class="o">/</span><span class="mi">19</span><span class="p">;</span>  
<span class="n">Deriv</span> <span class="p">=</span> <span class="n">Td</span><span class="o">*</span><span class="n">s</span><span class="p">;</span>
<span class="n">D</span> <span class="p">=</span> <span class="n">Kprop</span> <span class="o">*</span><span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="n">Deriv</span><span class="p">);</span>  
<span class="n">Go</span> <span class="p">=</span> <span class="n">D</span><span class="o">*</span><span class="n">G</span><span class="p">;</span>
</pre></div>

    </div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-matlab"><pre><span></span><span class="n">Gc</span> <span class="p">=</span> <span class="n">feedback</span><span class="p">(</span><span class="n">Go</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>  
<span class="n">Ge</span><span class="p">=</span><span class="mi">1</span><span class="o">/</span><span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="n">Go</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="jb_output_wrapper }}">
<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>
Gc =
 
      4 s + 19
  -----------------
  5 s^2 + 10 s + 20
 
Continuous-time transfer function.


Ge =
 
   5 s^2 + 6 s + 1
  -----------------
  5 s^2 + 10 s + 20
 
Continuous-time transfer function.

</pre>
</div>
</div>
</div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-matlab"><pre><span></span><span class="n">subplot</span><span class="p">(</span><span class="mi">211</span><span class="p">),</span><span class="n">step</span><span class="p">(</span><span class="n">Gc</span><span class="p">),</span><span class="n">title</span><span class="p">(</span><span class="s">&#39;Step Response: Kprop = 19, Td = 4/19&#39;</span><span class="p">),</span><span class="n">grid</span>
<span class="n">subplot</span><span class="p">(</span><span class="mi">212</span><span class="p">),</span><span class="n">step</span><span class="p">(</span><span class="n">Ge</span><span class="p">),</span><span class="n">title</span><span class="p">(</span><span class="s">&#39;Error Response: Kprop = 19, Td = 4/19&#39;</span><span class="p">),</span><span class="n">grid</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="jb_output_wrapper }}">
<div class="output_area">



<div class="output_png output_subarea ">
<img src="../../images/04/2/tuning_23_0.png"
>
</div>

</div>
</div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Third-Tuning-Stage:-Add-Integral-Action">Third Tuning Stage: Add Integral Action<a class="anchor-link" href="#Third-Tuning-Stage:-Add-Integral-Action"> </a></h2><p>Finally adding some integral action will eliminate the steady-state step error 
altogether.</p>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-matlab"><pre><span></span><span class="n">Ti</span> <span class="p">=</span> <span class="mi">2</span><span class="p">;</span>  
<span class="n">Integ</span> <span class="p">=</span> <span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="n">Ti</span><span class="p">)</span><span class="o">/</span><span class="n">s</span><span class="p">;</span>
<span class="n">D</span> <span class="p">=</span> <span class="n">Kprop</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="n">Deriv</span> <span class="o">+</span> <span class="n">Integ</span><span class="p">);</span>  
<span class="n">Go</span> <span class="p">=</span> <span class="n">D</span><span class="o">*</span><span class="n">G</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="jb_output_wrapper }}">
<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>
Go =
 
  4 s^2 + 19 s + 9.5
  ------------------
  5 s^3 + 6 s^2 + s
 
Continuous-time transfer function.

</pre>
</div>
</div>
</div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-matlab"><pre><span></span><span class="n">Gc</span><span class="p">=</span><span class="n">feedback</span><span class="p">(</span><span class="n">Go</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
<span class="n">Ge</span><span class="p">=</span><span class="mi">1</span><span class="o">/</span><span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="n">Go</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="jb_output_wrapper }}">
<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>
Gc =
 
      4 s^2 + 19 s + 9.5
  ---------------------------
  5 s^3 + 10 s^2 + 20 s + 9.5
 
Continuous-time transfer function.


Ge =
 
       5 s^3 + 6 s^2 + s
  ---------------------------
  5 s^3 + 10 s^2 + 20 s + 9.5
 
Continuous-time transfer function.

</pre>
</div>
</div>
</div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-matlab"><pre><span></span><span class="n">subplot</span><span class="p">(</span><span class="mi">211</span><span class="p">),</span><span class="n">step</span><span class="p">(</span><span class="n">Gc</span><span class="p">),</span><span class="n">title</span><span class="p">(</span><span class="s">&#39;Step Response: Kprop = 19, Td = 4/19, Ti = 2&#39;</span><span class="p">),</span><span class="n">grid</span> 
<span class="n">subplot</span><span class="p">(</span><span class="mi">212</span><span class="p">),</span><span class="n">step</span><span class="p">(</span><span class="n">Ge</span><span class="p">),</span><span class="n">title</span><span class="p">(</span><span class="s">&#39;Error Response: Kprop = 19, Td = 4/19, Ti = 2&#39;</span><span class="p">),</span><span class="n">grid</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="jb_output_wrapper }}">
<div class="output_area">



<div class="output_png output_subarea ">
<img src="../../images/04/2/tuning_27_0.png"
>
</div>

</div>
</div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Comments">Comments<a class="anchor-link" href="#Comments"> </a></h2><p>One would probably try further adjustments to reduce the overshoot that the 
addition of integral action produces</p>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Exercises">Exercises<a class="anchor-link" href="#Exercises"> </a></h2><p>You might like to try further adjustments of the parameters $K_{\mathrm{prop}}$, $T_d$ and $T_I$.</p>
<p>See also the companion documents on the <a href="">Analytical design of a PID compensator</a> 
and <a href="">Zeigler-Nichols tuning</a> and <a href="">Autotuning a PID Compensator with MATLAB</a>.</p>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Resources">Resources<a class="anchor-link" href="#Resources"> </a></h2><p>An executable version of this document is available to download as a MATLAB Live Script file <a href="matlab/pid_tuning.mlx">pid_tuning.mlx</a>. You can simulate this design using the file <a href="matlab/pid_cl.slx">pid_cl.slx</a>.</p>

</div>
</div>
</div>
</div>

 


    </main>
    